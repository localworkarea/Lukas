import{a as G,i as K}from"./app.min.js";class Q{constructor(){this.daClassname="--dynamic",this.init()}init(){this.objects=[],this.nodes=[...document.querySelectorAll("[data-fls-dynamic]")],this.nodes.forEach(e=>{const t=e.dataset.flsDynamic.trim().split(","),d={};d.element=e,d.parent=e.parentNode;const C=t[0]?.trim(),L=t[1]?.trim()||"767.98",S=t[2]?.trim()||"last",M=t[3]?.trim()||"max";d.breakpoint=L,d.place=S,d.type=M,d.index=this.indexInParent(d.parent,d.element);const A=document.querySelector(C);A&&(d.destination=A),this.objects.push(d)}),this.arraySort(this.objects);const s={};this.objects.forEach(e=>{const n=`(${e.type}-width: ${e.breakpoint/16}em),${e.breakpoint},${e.type}`;s[n]||(s[n]=[]),s[n].push(e)}),Object.entries(s).forEach(([e,n])=>{const[t,d,C]=e.split(","),L=window.matchMedia(t);L.addEventListener("change",()=>{this.mediaHandler(L,n)}),this.mediaHandler(L,n)})}mediaHandler(s,e){s.matches?e.forEach(n=>{n.destination&&this.moveTo(n.place,n.element,n.destination)}):e.forEach(({parent:n,element:t,index:d})=>{t.classList.contains(this.daClassname)&&this.moveBack(n,t,d)})}moveTo(s,e,n){e.classList.add(this.daClassname);const t=s==="last"||s==="first"?s:parseInt(s,10);t==="last"||t>=n.children.length?n.append(e):t==="first"?n.prepend(e):n.children[t].before(e)}moveBack(s,e,n){e.classList.remove(this.daClassname),s.children[n]!==void 0?s.children[n].before(e):s.append(e)}indexInParent(s,e){return[...s.children].indexOf(e)}arraySort(s){s.sort((e,n)=>e.breakpoint===n.breakpoint?e.place===n.place?0:e.place==="first"||n.place==="last"?-1:e.place==="last"||n.place==="first"?1:0:e.breakpoint-n.breakpoint)}}document.querySelector("[data-fls-dynamic]")&&window.addEventListener("load",()=>new Q);class J{constructor(s,e=null){let n={init:!0};if(this.config=Object.assign(n,s),this.config.init){const t=document.querySelectorAll("[data-fls-mouse]");t.length&&this.paralaxMouseInit(t)}}paralaxMouseInit(s){s.forEach(e=>{const n=e.closest("[data-fls-mouse-wrapper]"),t=+e.dataset.flsMouseCx||100,d=+e.dataset.flsMouseCy||100,C=e.hasAttribute("data-fls-mouse-dxr")?-1:1,L=e.hasAttribute("data-fls-mouse-dyr")?-1:1,S=e.dataset.prlxA?+e.dataset.prlxA:50;let M=0,A=0,i=0,a=0;r(),n?u(n):u();function r(){const c=i-M,p=a-A;M=M+c*S/1e3,A=A+p*S/1e3,e.style.cssText=`transform: translate3D(${C*M/(t/10)}%,${L*A/(d/10)}%,0) rotate(0.02deg);`,requestAnimationFrame(r)}function u(c=window){c.addEventListener("mousemove",function(p){const g=e.getBoundingClientRect().top+window.scrollY;if(g>=window.scrollY||g+e.offsetHeight>=window.scrollY){const o=window.innerWidth,f=window.innerHeight,v=p.clientX-o/2,b=p.clientY-f/2;i=v/o*100,a=b/f*100}})}})}}document.querySelector("[data-fls-mouse]")&&window.addEventListener("load",new J({})),document.addEventListener("DOMContentLoaded",()=>{Z()});const Z=()=>{const P=document.querySelectorAll("[data-fls-marquee]");if(!P.length)return;const s=e=>e?.offsetWidth||0;P.forEach(e=>{if(e.dataset.flsMarqueeInit==="true")return;e.dataset.flsMarqueeInit="true";const n={inner:"data-fls-marquee-inner",item:"data-fls-marquee-item"};let t=null,d=null;const C=parseFloat(e.getAttribute("data-fls-marquee-space")),L=parseFloat(e.getAttribute("data-fls-marquee-speed"))/10||100,M=e.getAttribute("data-fls-marquee-direction")==="right",A=e.hasAttribute("data-fls-marquee-drag");let i=0,a=performance.now(),r=0,u=!1,c=!1,p=0,g=0,o=0,f=0,v=[],b=null,T,k,y,_;if(!(()=>{const w=e.querySelector(`[${n.inner}]`);if(w)return t=w,d=t.querySelectorAll(`[${n.item}]`),!!d.length;const E=Array.from(e.children);return E.length?(E.forEach(m=>m.setAttribute(n.item,"")),e.innerHTML=`<div ${n.inner}>${e.innerHTML}</div>`,t=e.querySelector(`[${n.inner}]`),d=e.querySelectorAll(`[${n.item}]`),!!t&&!!d.length):!1})())return;const D=parseFloat(getComputedStyle(d[0]).getPropertyValue("margin-right"))||0,q=isNaN(D)?isNaN(C)?30:C:D,B=()=>{const w=s(e);if(w<=0)return!1;let E=0;r=0;let m=Array.from(t.children);if(v.length?m=[...v]:v=m,t.style.display="flex",t.innerHTML="",m.slice().reverse().forEach(h=>{const l=h.cloneNode(!0);l.style.marginRight=`${q}px`,l.style.flexShrink=0,t.insertBefore(l,t.firstChild)}),m.forEach(h=>{h.style.marginRight=`${q}px`,h.style.flexShrink=0,t.append(h);const l=s(h);l<=0||(E+=l+q,r+=l+q)}),r<=0)return t.innerHTML="",v.forEach(h=>{h.style.marginRight=`${q}px`,h.style.flexShrink=0,t.append(h)}),!1;const x=w*2+r;let I=0,H=0;for(;E<x&&m.length>0;){m[I]||(I=0);const h=m[I].cloneNode(!0);h.style.marginRight=`${q}px`,h.style.flexShrink=0,t.appendChild(h);const l=s(h);if(l<=0){if(++H>2e3)break;I++;continue}if(E+=l+q,I++,++H>2e3)break}return!0},N=()=>{const w=performance.now(),E=w-a;a=w;const m=.05,x=(M?1:-1)*(L/1e3);f+=((u||c?0:x)-f)*m,i+=f*E,i<=-r*2&&(i+=r),i>=-r&&(i-=r),t.style.transform=`translateX(${i}px)`,b=requestAnimationFrame(N)},z=()=>{if(t.style.cursor=A?"grab":"",A&&(t.style.touchAction="pan-y"),!A)return;const w=l=>l.type.startsWith("touch")?l.touches[0].clientX:l.clientX,E=l=>l.type.startsWith("touch")?l.touches[0].clientY:l.clientY;let m=!1,x=null;const I=6,H=1.2;let h=0;T=l=>{m=!0,u=!1,x=null,p=w(l),g=E(l),o=i,h=performance.now(),l.type==="mousedown"&&l.preventDefault(),t.style.cursor="grabbing",window.addEventListener("mousemove",k,{passive:!1}),window.addEventListener("mouseup",y,{passive:!0}),window.addEventListener("touchmove",k,{passive:!1}),window.addEventListener("touchend",y,{passive:!0}),window.addEventListener("touchcancel",y,{passive:!0})},k=l=>{if(!m)return;const Y=w(l),F=E(l),R=Y-p,W=F-g,O=Math.abs(R),$=Math.abs(W);if(!x){if(O<I&&$<I)return;if(O>$*H)x="x",u=!0,c=!0,o=i,p=Y,g=F;else if($>O*H)x="y";else return}if(x==="y")return;l.cancelable&&l.preventDefault();const U=Y-p;i=o+U},y=()=>{if(u){const l=i-o,Y=Math.max(performance.now()-h,16),F=l/Y,R=1.5;f=Math.abs(F)>.1?Math.max(-R,Math.min(R,F)):0}m=!1,u=!1,x=null,c=!1,t.style.cursor="grab",window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",y),window.removeEventListener("touchmove",k),window.removeEventListener("touchend",y),window.removeEventListener("touchcancel",y)},_=()=>{document.pointerLockElement||m&&y()},t.addEventListener("mousedown",T),t.addEventListener("touchstart",T,{passive:!0}),t.addEventListener("mouseleave",_)},V=()=>{cancelAnimationFrame(b),b=null,t&&(t.style.cursor="",t.style.touchAction="",t.style.transform="",t.removeEventListener("mousedown",T),t.removeEventListener("touchstart",T),t.removeEventListener("mouseleave",_)),window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",y),window.removeEventListener("touchmove",k),window.removeEventListener("touchend",y),window.removeEventListener("touchcancel",y),delete e.dataset.flsMarqueeInit};window.addEventListener("beforeunload",V),(()=>{let w=0;const E=()=>{if(w++,!B()){if(w<10){requestAnimationFrame(E);return}r=Math.max(1,Array.from(t.children).reduce((m,x)=>m+s(x)+q,0))}i=0,a=performance.now(),z(),e.hasAttribute("data-fls-marquee-pause")&&(t.addEventListener("mouseenter",()=>{u||(c=!0)}),t.addEventListener("mouseleave",()=>{c=!1})),b=requestAnimationFrame(N)};E()})()})};G(),document.addEventListener("DOMContentLoaded",()=>{function P(i=-8){const a=document.querySelectorAll("[data-fls-clip]");if(!a.length)return;const r=i*(Math.PI/180);a.forEach(u=>{const c=u.offsetWidth,p=u.getBoundingClientRect().height,g=Math.tan(Math.abs(r))*c,o=p-g;u.style.clipPath=`polygon(
			0 0,
			${c}px 0,
			${c}px ${o}px,
			0 ${p}px
		)`})}P(-8);const s=document.querySelector("[data-info-el]");if(s){let i=function(o){return o.querySelectorAll(".info-cake__img, .info-cake__item")},a=function(){p.forEach(o=>{i(o).forEach((f,v)=>{f.classList.toggle("--active",v===0)})})},r=function(o){const f=o-1;p.forEach(v=>{i(v).forEach((b,T)=>{b.classList.toggle("--active",T===f)})})},u=function(){g.forEach(o=>{o.parentElement?.classList.remove("--hover"),o.classList.remove("--hover-el")})},c=function(o){u(),o.parentElement?.classList.add("--hover"),o.classList.add("--hover-el")};const p=[...s.querySelectorAll("[data-info-subel]")],g=[...document.querySelectorAll("[data-info]")];a(),g.forEach(o=>{const f=parseInt(o.dataset.info,10);if(isNaN(f))return;const v=()=>{r(f),c(o)};o.addEventListener("mouseenter",v),o.addEventListener("click",v),o.addEventListener("mouseleave",()=>{o.parentElement?.classList.remove("--hover")})}),document.addEventListener("click",o=>{o.target.closest("[data-info]")||u()})}let e=[],n=window.scrollY;function t(i){const a=i.split(",").map(r=>r.trim());return[a[0]||"top",a[1]||"top"]}function d(i,a){if(typeof i=="string"){if(i.endsWith("%"))return a*parseFloat(i)/100;if(i==="top")return 0;if(i==="center")return a/2;if(i==="bottom")return a;if(!isNaN(parseFloat(i)))return parseFloat(i)}return 0}function C(){const i=document.querySelectorAll("[data-trigger-start]");i.length&&(e=Array.from(i).map(a=>{const[r,u]=t(a.dataset.triggerStart);return{element:a,startElementPoint:r,startViewportPoint:u,isActive:!1}}),window.addEventListener("scroll",L),requestAnimationFrame(()=>{setTimeout(()=>{n=window.scrollY,L(!0)},50)}))}function L(i=!1){const a=window.innerHeight,r=window.scrollY>n,u=window.scrollY<n;e.forEach(c=>{const p=c.element.getBoundingClientRect(),g=d(c.startElementPoint,p.height),o=d(c.startViewportPoint,a),f=p.top+g;!c.isActive&&f<=o&&(r||i)&&(c.element.classList.add("--view"),c.isActive=!0),c.isActive&&f>o&&u&&(c.element.classList.remove("--view"),c.isActive=!1)}),n=window.scrollY}C();const S=document.querySelector('[data-fls-popup="popup-cake"]');if(S){const i=S.querySelector(".popup-cake__title"),a=S.querySelector(".popup-cake__txt"),r=S.querySelector(".popup-cake__specification"),u=S.querySelector(".popup-cake__btn"),c=S.querySelector(".popup-cake__picture img");document.querySelectorAll('[data-fls-popup-link="popup-cake"]').forEach(g=>{g.addEventListener("click",o=>{o.preventDefault();const f=g.querySelector("[data-popup-info]");if(!f)return;i.textContent="";const v=f.querySelector("[data-popup-title]");v&&(i.textContent=v.textContent.trim()),a.innerHTML="";const b=f.querySelector("[data-popup-descr]");b&&(a.innerHTML=b.innerHTML.trim()),r.innerHTML="";const T=f.querySelectorAll("[data-popup-specs-item]");if(T.length){const y=document.createElement("ul");y.className="specification__list",T.forEach(_=>{const X=_.querySelector("[data-popup-specs-title]")?.textContent.trim()||"",D=_.querySelector("[data-popup-specs-descr]")?.textContent.trim()||"";if(!X&&!D)return;const q=document.createElement("li");q.className="specification__item",q.innerHTML=`
	            <div class="specification__title"><p>${X}</p></div>
	            <div class="specification__descr"><p>${D}</p></div>
	          `,y.appendChild(q)}),y.children.length&&r.appendChild(y)}const k=g.querySelector("img");k&&c&&(c.src=k.getAttribute("src")||c.src,c.alt=k.getAttribute("alt")||"Image"),u.setAttribute("href",f.dataset.popupOrder||"#")})})}let M=window.innerWidth;if(new ResizeObserver(i=>{requestAnimationFrame(()=>{i.forEach(a=>{const r=a.contentRect.width;r!==M&&(P(-8),L(),M=r)})})}).observe(document.body),K.iOS()&&(document.querySelector(".cake-hero"),popupCases)){const i=document.querySelectorAll("video");if(i.length>0){let a=function(r){r.playing||r.play().catch(u=>{console.error("Failed to play video:",u)})};Object.defineProperty(HTMLMediaElement.prototype,"playing",{get:function(){return this.currentTime>0&&!this.paused&&!this.ended&&this.readyState>2}}),i.forEach(r=>{r.hasAttribute("playsinline")||r.setAttribute("playsinline","")}),document.body.addEventListener("click",()=>{i.forEach(r=>a(r))}),document.body.addEventListener("touchstart",()=>{i.forEach(r=>a(r))})}}});
